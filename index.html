<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta name="theme-color" content="#111827" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="icon-192.png">
    <link rel="apple-touch-icon" href="apple-touch-icon.png">
    <meta property="og:title" content="日本語 학습 · 생쥐 & 치즈" />
    <meta property="og:description" content="한국어로 배우는 일본어 | 퀴즈 · 게임 · 쓰기 · 배지" />
    <meta property="og:image" content="og-image.png" />
    <meta property="og:type" content="website" />
    <meta property="og:locale" content="ko_KR" />
    <title>日本語 학습 · 생쥐 & 치즈</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>
  <body class="bg-gradient-to-b from-gray-50 to-gray-100">
    <div id="root"></div>
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => navigator.serviceWorker.register('./sw.js'));
      }
    </script>
    <script type="text/babel">
      const { useEffect, useMemo, useRef, useState } = React;

      const WORDS = [
        { id: 1, level: "N5", topic: "인사", ko: "안녕하세요", ja: "こんにちは", reading: "こんにちは", romaji: "konnichiwa", script: "kana", pos: "인사", example: "こんにちは、元気ですか。" },
        { id: 2, level: "N5", topic: "인사", ko: "감사합니다", ja: "ありがとうございます", reading: "ありがとうございます", romaji: "arigatou gozaimasu", script: "kana", pos: "인사", example: "本当にありがとうございます。" },
        { id: 3, level: "N5", topic: "인사", ko: "미안합니다", ja: "すみません", reading: "すみません", romaji: "sumimasen", script: "kana", pos: "인사", example: "遅れてすみません。" },
        { id: 4, level: "N5", topic: "대답", ko: "네/예", ja: "はい", reading: "はい", romaji: "hai", script: "kana", pos: "부사", example: "はい、わかりました。" },
        { id: 5, level: "N5", topic: "대답", ko: "아니오", ja: "いいえ", reading: "いいえ", romaji: "iie", script: "kana", pos: "부사", example: "いいえ、違います。" },
        { id: 6, level: "N5", topic: "감정", ko: "사랑", ja: "愛", reading: "あい", romaji: "ai", script: "kanji", pos: "명사", example: "愛は大切です。" },
        { id: 7, level: "N5", topic: "인간관계", ko: "친구", ja: "友達", reading: "ともだち", romaji: "tomodachi", script: "kanji", pos: "명사", example: "友達に会います。" },
        { id: 8, level: "N5", topic: "생활", ko: "물", ja: "水", reading: "みず", romaji: "mizu", script: "kanji", pos: "명사", example: "水をください。" },
        { id: 9, level: "N5", topic: "생활", ko: "밥/식사", ja: "ご飯", reading: "ごはん", romaji: "gohan", script: "kanji", pos: "명사", example: "ご飯を食べます。" },
        { id: 10, level: "N5", topic: "장소", ko: "학교", ja: "学校", reading: "がっこう", romaji: "gakkou", script: "kanji", pos: "명사", example: "学校へ行きます。" },
        { id: 11, level: "N5", topic: "직업", ko: "선생님", ja: "先生", reading: "せんせい", romaji: "sensei", script: "kanji", pos: "명사", example: "先生に聞きます。" },
        { id: 12, level: "N5", topic: "직업", ko: "학생", ja: "学生", reading: "がくせい", romaji: "gakusei", script: "kanji", pos: "명사", example: "私は学生です。" },
        { id: 13, level: "N5", topic: "시간", ko: "오늘", ja: "今日", reading: "きょう", romaji: "kyou", script: "kanji", pos: "명사", example: "今日は忙しいです。" },
        { id: 14, level: "N5", topic: "시간", ko: "내일", ja: "明日", reading: "あした", romaji: "ashita", script: "kanji", pos: "명사", example: "明日会いましょう。" },
        { id: 15, level: "N5", topic: "시간", ko: "어제", ja: "昨日", reading: "きのう", romaji: "kinou", script: "kanji", pos: "명사", example: "昨日は雨でした。" },
        { id: 16, level: "N5", topic: "방향", ko: "왼쪽", ja: "左", reading: "ひだり", romaji: "hidari", script: "kanji", pos: "명사", example: "左に曲가ってください。" },
        { id: 17, level: "N5", topic: "방향", ko: "오른쪽", ja: "右", reading: "みぎ", romaji: "migi", script: "kanji", pos: "명사", example: "右があります。" },
        { id: 18, level: "N5", topic: "방향", ko: "위", ja: "上", reading: "うえ", romaji: "ue", script: "kanji", pos: "명사", example: "上を見て。" },
        { id: 19, level: "N5", topic: "방향", ko: "아래", ja: "下", reading: "した", romaji: "shita", script: "kanji", pos: "명사", example: "下に置いて。" },
        { id: 20, level: "N5", topic: "시간", ko: "시간", ja: "時間", reading: "じかん", romaji: "jikan", script: "kanji", pos: "명사", example: "時間がありますか。" },
        { id: 21, level: "N5", topic: "돈", ko: "돈", ja: "お金", reading: "おかね", romaji: "okane", script: "kanji", pos: "명사", example: "お金を払います。" },
        { id: 22, level: "N5", topic: "교통", ko: "전철", ja: "電車", reading: "でんしゃ", romaji: "densha", script: "kanji", pos: "명사", example: "電車に乗ります。" },
        { id: 23, level: "N5", topic: "지명", ko: "도쿄", ja: "東京", reading: "とうきょう", romaji: "Toukyou", script: "kanji", pos: "명사", example: "東京は大きい町です。" },
        { id: 24, level: "N5", topic: "취미", ko: "음악", ja: "音楽", reading: "おんがく", romaji: "ongaku", script: "kanji", pos: "명사", example: "音楽が好きです。" },
        { id: 25, level: "N5", topic: "동사", ko: "노래하다", ja: "歌う", reading: "うたう", romaji: "utau", script: "kanji", pos: "동사", example: "一緒に歌いましょう。" },
        { id: 26, level: "N5", topic: "동사", ko: "만나다", ja: "会う", reading: "あう", romaji: "au", script: "kanji", pos: "동사", example: "友達に会う。" },
        { id: 27, level: "N5", topic: "동사", ko: "가다", ja: "行く", reading: "いく", romaji: "iku", script: "kanji", pos: "동사", example: "学校へ行く。" },
        { id: 28, level: "N5", topic: "동사", ko: "오다", ja: "来る", reading: "くる", romaji: "kuru", script: "kanji", pos: "동사", example: "明日来てください。" },
        { id: 29, level: "N5", topic: "동사", ko: "보다", ja: "見る", reading: "みる", romaji: "miru", script: "kanji", pos: "동사", example: "映画を見る。" },
        { id: 30, level: "N5", topic: "동사", ko: "만들다", ja: "作る", reading: "つくる", romaji: "tsukuru", script: "kanji", pos: "동사", example: "曲を作る。" },
      ];

      const STORAGE_KEY = "jpAppProgress_v2";
      const nowYMD = () => new Date().toISOString().slice(0, 10);

      function loadProgress(){ try{ const raw=localStorage.getItem(STORAGE_KEY); return raw? JSON.parse(raw): null } catch { return null; } }
      function saveProgress(s){ localStorage.setItem(STORAGE_KEY, JSON.stringify(s)); }
      function nextDue(correct){ const d=new Date(); if(correct) d.setDate(d.getDate()+2); return d.toISOString().slice(0,10); }
      function shuffle(a){ a=[...a]; for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]];} return a; }

      const Mouse = () => <span role="img" aria-label="mouse">🐭</span>;
      const Cheese = () => <span role="img" aria-label="cheese">🧀</span>;

      function StatBadge({label, value}){ return (<div className="rounded-2xl bg-white border p-3 shadow text-center"><div className="text-sm text-gray-500">{label}</div><div className="text-2xl font-bold">{value}</div></div>); }
      function Badge({name, desc}){ return (<div className="rounded-2xl border bg-white p-3 shadow"><div className="font-semibold">🏅 {name}</div><div className="text-sm text-gray-600">{desc}</div></div>); }

      const SCRIPT_STEPS=[
        { key: "kana", label: "히라가나/가타카나" },
        { key: "kana+romaji", label: "히라가나 + 로마자" },
        { key: "kanji", label: "한자(읽기 함께)" },
      ];

      function App(){
        const [state, setState] = useState(loadProgress() || { lastOpenDate:null, streak:0, learnedIds:[], dueMap:{}, stats:{correct:0,wrong:0,gamesWon:0}, week:{start:null,answers:0}, badges:[] });
        const [tab, setTab] = useState("학습");
        const [today, setToday] = useState(nowYMD());
        const [level, setLevel] = useState("ALL");
        const [topic, setTopic] = useState("ALL");
        const [scriptMode, setScriptMode] = useState("kana");

        function thisWeekStart(){ const d=new Date(); const day=d.getDay(); const delta=(day===0?-6:1-day); d.setDate(d.getDate()+delta); return d.toISOString().slice(0,10); }

        useEffect(()=>{
          const y=nowYMD(); setToday(y);
          const start=thisWeekStart();
          setState(prev=>{ let streak=prev.streak; if(!prev.lastOpenDate) streak=1; else { const diff=(new Date(y)-new Date(prev.lastOpenDate))/86400000; if(diff>=1 && diff<2) streak=prev.streak+1; else if(diff>=2) streak=1; } const week=(!prev.week||prev.week.start!==start)?{start,answers:0}:prev.week; const next={...prev, lastOpenDate:y, streak, week}; saveProgress(next); return next; });
        },[]);

        const levels = React.useMemo(()=>["ALL", ...Array.from(new Set(WORDS.map(w=>w.level)))], []);
        const topics = React.useMemo(()=>["ALL", ...Array.from(new Set(WORDS.map(w=>w.topic)))], []);
        const pool = React.useMemo(()=> WORDS.filter(w => (level==="ALL"||w.level===level) && (topic==="ALL"||w.topic===topic)), [level,topic]);

        const dueIds = React.useMemo(()=>{ const y=today; return Object.entries(state.dueMap).filter(([,d])=>d<=y).map(([id])=>parseInt(id)); }, [state.dueMap, today]);
        const learnedSet = new Set(state.learnedIds);
        const newWords = React.useMemo(()=> pool.filter(w=>!learnedSet.has(w.id)).slice(0,5), [pool, state.learnedIds]);
        const dueWords = React.useMemo(()=> pool.filter(w=> dueIds.includes(w.id)), [pool, dueIds]);
        const todaySet = React.useMemo(()=> shuffle([...newWords, ...dueWords]).slice(0,10), [newWords, dueWords]);

        function awardBadges(next){ const unlocked=new Set(next.badges); const accuracy=(next.stats.correct+next.stats.wrong)?(next.stats.correct/(next.stats.correct+next.stats.wrong)):0; if(next.streak>=7) unlocked.add("한 주 개근"); if(accuracy>=0.9 && (next.stats.correct+next.stats.wrong)>=30) unlocked.add("정답률 90% 클럽"); if(next.stats.gamesWon>=3) unlocked.add("치즈 사냥꾼"); if(next.week.answers>=50) unlocked.add("주간 챌린지 달성"); return Array.from(unlocked); }

        function markResult(id, correct){ setState(prev=>{ const learnedIds=prev.learnedIds.includes(id)?prev.learnedIds:[...prev.learnedIds,id]; const dueMap={...prev.dueMap,[id]:nextDue(correct)}; const stats={...prev.stats, correct:prev.stats.correct+(correct?1:0), wrong:prev.stats.wrong+(correct?0:1)}; const week={...prev.week, answers:(prev.week?.answers||0)+1}; const next={...prev, learnedIds, dueMap, stats, week}; next.badges=awardBadges(next); saveProgress(next); return next; }); }

        function RenderWord({w}){ let main=w.ja; if(scriptMode==="kana") main=w.script==="kanji"? w.reading : w.ja; if(scriptMode==="kana+romaji") main=`${w.script==="kanji"? w.reading: w.ja} · ${w.romaji}`; if(scriptMode==="kanji") main=`${w.ja} (${w.reading})`; return (<><div className="text-sm text-gray-500">일본어</div><div className="text-2xl font-bold">{main}</div><div className="text-sm text-gray-500">한국어</div><div className="text-base">{w.ko}</div></>); }
        function speakJA(t){ if(!("speechSynthesis" in window)) return alert("브라우저가 TTS를 지원하지 않아요"); const u=new SpeechSynthesisUtterance(t); u.lang="ja-JP"; u.rate=0.95; const v=speechSynthesis.getVoices().find(v=>v.lang.startsWith("ja")); if(v) u.voice=v; speechSynthesis.cancel(); speechSynthesis.speak(u); }

        function Quiz(){ const [i,setI]=useState(0); const [mode,setMode]=useState("객관식"); const items=todaySet.length? todaySet: shuffle(pool).slice(0,10); const cur=items[i%items.length]; const choices=React.useMemo(()=>{ const p=shuffle(pool.filter(w=>w.id!==cur.id)).slice(0,3); return shuffle([...p,cur]).map(w=>({id:w.id,label:`${w.ja} (${w.reading})`})); },[cur]); const [ans,setAns]=useState(""); const [fb,setFb]=useState(""); function next(ok){ markResult(cur.id, ok); setFb(ok? "정답!": `오답… 정답: ${cur.ja}`); setTimeout(()=>{ setFb(""); setAns(""); setI(x=>x+1); }, 700); } return (<div className="space-y-4"><div className="flex items-center justify-between gap-3 flex-wrap"><div className="text-lg">오늘의 퀴즈 · {i+1}/{items.length}</div><div className="flex gap-2">{["객관식","타자"].map(m=><button key={m} onClick={()=>setMode(m)} className={`px-3 py-1 rounded-2xl border ${mode===m?"bg-black text-white":"bg-white"}`}>{m}</button>)}<button onClick={()=>speakJA(cur.ja)} className="px-3 py-1 rounded-2xl border">🔊 발음</button></div></div><div className="rounded-2xl bg-white border p-4 shadow"><RenderWord w={cur}/><div className="text-sm text-gray-500 mt-2">예문</div><div className="text-base">{cur.example}</div></div>{mode==="객관식"? (<div className="grid md:grid-cols-2 gap-3">{choices.map(c=>(<button key={c.id} onClick={()=>next(c.id===cur.id)} className="rounded-2xl bg-white border p-3 shadow text-left hover:scale-[1.01] transition"><div className="text-lg">{c.label}</div></button>))}</div>) : (<div className="flex flex-col gap-3"><input className="border rounded-2xl p-3" placeholder="정답(일본어)을 입력하세요" value={ans} onChange={e=>setAns(e.target.value)} onKeyDown={e=> e.key==='Enter' && next(ans.trim()===cur.ja)} /><div className="flex gap-2"><button onClick={()=>next(ans.trim()===cur.ja)} className="px-4 py-2 rounded-2xl bg-black text-white">확인</button><button onClick={()=>speakJA(cur.ja)} className="px-4 py-2 rounded-2xl border">🔊 발음</button></div></div>)}{fb && <div className="text-center text-lg">{fb}</div>}</div>); }

        function Learn(){ const items=todaySet.length? todaySet: pool.slice(0,10); return (<div className="space-y-4"><div className="flex flex-wrap gap-2 items-center"><select className="border rounded-2xl px-3 py-2" value={level} onChange={e=>setLevel(e.target.value)}>{levels.map(l=><option key={l} value={l}>{l}</option>)}</select><select className="border rounded-2xl px-3 py-2" value={topic} onChange={e=>setTopic(e.target.value)}>{topics.map(t=><option key={t} value={t}>{t}</option>)}</select><div className="flex gap-2">{SCRIPT_STEPS.map(s=>(<button key={s.key} onClick={()=>setScriptMode(s.key)} className={`px-3 py-2 rounded-2xl border ${scriptMode===s.key?"bg-black text-white":"bg-white"}`}>{s.label}</button>))}</div></div><div className="grid md:grid-cols-2 gap-4">{items.map(w=>(<div key={w.id} className="rounded-2xl bg-white border p-4 shadow space-y-2"><RenderWord w={w}/><div className="text-sm text-gray-500">품사/레벨/토픽</div><div className="text-base">{w.pos} · {w.level} · {w.topic}</div><div className="text-sm text-gray-500">예문</div><div className="text-base">{w.example}</div><div className="flex gap-2 pt-2"><button className="px-3 py-1 rounded-2xl border" onClick={()=>speakJA(w.ja)}>🔊 발음</button><button className="px-3 py-1 rounded-2xl border" onClick={()=>markResult(w.id, true)}>학습완료</button></div></div>))}</div></div>); }

        function Game(){ const size=5; const [mouse,setMouse]=useState({x:0,y:0}); const [cheese,setCheese]=useState({x:size-1,y:size-1}); const [current,setCurrent]=useState(()=> shuffle(todaySet.length? todaySet: pool).slice(0,10)); const [qIndex,setQIndex]=useState(0); const word=current[qIndex%current.length]; const options=React.useMemo(()=>{ const p=shuffle(pool.filter(w=>w.id!==word.id)).slice(0,3); return shuffle([...p, word]); }, [word]); function move(){ setMouse(m=>({x: m.x + Math.sign(cheese.x-m.x), y: m.y + Math.sign(cheese.y-m.y)})); } const win=mouse.x===cheese.x && mouse.y===cheese.y; useEffect(()=>{ if(win){ setState(prev=>{ const next={...prev, stats:{...prev.stats, gamesWon:prev.stats.gamesWon+1}}; saveProgress(next); return next;}); }}, [win]); return (<div className="space-y-4"><div className="text-lg">🐭 생쥐를 🧀 치즈까지 · 문제 {qIndex+1}/{current.length}</div><div className="grid grid-cols-5 gap-2 w-max">{Array.from({length:size*size}).map((_,i)=>{ const x=i%size, y=Math.floor(i/size); const isM=mouse.x===x && mouse.y===y; const isC=cheese.x===x && cheese.y===y; return (<div key={i} className={`h-14 w-14 rounded-2xl border flex items-center justify-center bg-white ${isC?"bg-yellow-50":""}`}>{isM? <Mouse/> : isC? <Cheese/> : <span className="text-xs text-gray-300">·</span>}</div>); })}</div>{win? (<div className="rounded-2xl bg-green-50 border p-4"><div className="text-lg font-semibold">성공! 치즈를 찾았어요! 🧀</div><button className="mt-2 px-4 py-2 rounded-2xl bg-black text-white" onClick={()=>{ setMouse({x:0,y:0}); setCheese({x:size-1,y:size-1}); setQIndex(0); setCurrent(shuffle(pool).slice(0,10)); }}>다시 하기</button></div>) : (<div className="rounded-2xl bg-white border p-4 shadow"><div className="flex items-center justify-between"><div><div className="text-sm text-gray-500">한국어 뜻</div><div className="text-xl font-semibold">{word.ko}</div></div><button onClick={()=>speakJA(word.ja)} className="px-3 py-1 rounded-2xl border">🔊 발음</button></div><div className="grid md:grid-cols-2 gap-3 mt-3">{options.map(o=>(<button key={o.id} onClick={()=>{ const ok=o.id===word.id; markResult(word.id, ok); if(ok){ move(); setQIndex(i=>i+1); } }} className="rounded-2xl bg-white border p-3 shadow text-left hover:scale-[1.01] transition"><div className="text-lg">{o.ja} ({o.reading})</div></button>))}</div></div>)}</div>); }

        function Writing(){ const [target,setTarget]=useState(WORDS[0]); const canvasRef=useRef(null); const [drawing,setDrawing]=useState(false); useEffect(()=>{ const c=canvasRef.current; if(!c) return; const ctx=c.getContext('2d'); ctx.clearRect(0,0,c.width,c.height); ctx.lineWidth=6; ctx.lineCap='round'; ctx.strokeStyle='#111'; },[target]); function start(e){ setDrawing(true); draw(e);} function end(){ setDrawing(false); const c=canvasRef.current; c && c.getContext('2d').beginPath(); } function pos(e){ const c=canvasRef.current; const r=c.getBoundingClientRect(); const x=(e.clientX||e.touches?.[0]?.clientX)-r.left; const y=(e.clientY||e.touches?.[0]?.clientY)-r.top; return {x,y}; } function draw(e){ if(!drawing) return; const {x,y}=pos(e); const ctx=canvasRef.current.getContext('2d'); ctx.lineTo(x,y); ctx.stroke(); ctx.beginPath(); ctx.moveTo(x,y);} function clear(){ const c=canvasRef.current; const ctx=c.getContext('2d'); ctx.clearRect(0,0,c.width,c.height);} const guideChar=React.useMemo(()=> (scriptMode==="kanji"? target.ja : target.reading?.split('')?.[0] || target.ja), [target, scriptMode]); return (<div className="space-y-4"><div className="flex gap-2 items-center flex-wrap"><select className="border rounded-2xl px-3 py-2" value={target.id} onChange={e=>setTarget(WORDS.find(w=>w.id===parseInt(e.target.value)))}>{WORDS.map(w=><option key={w.id} value={w.id}>{w.ja} · {w.ko}</option>)}</select><button className="px-3 py-2 rounded-2xl border" onClick={()=>speakJA(target.ja)}>🔊 발음</button><div className="text-sm text-gray-600">가이드: <span className="text-xl font-bold">{guideChar}</span></div></div><div className="grid md:grid-cols-[1fr,300px] gap-4 items-start"><div className="rounded-2xl bg-white border p-4 shadow"><canvas ref={canvasRef} width={600} height={400} onMouseDown={start} onMouseUp={end} onMouseMove={draw} onMouseLeave={end} onTouchStart={e=>{e.preventDefault(); start(e.touches[0]);}} onTouchMove={e=>{e.preventDefault(); draw(e.touches[0]);}} onTouchEnd={e=>{e.preventDefault(); end();}} className="w-full rounded-xl border bg-white" /><div className="flex gap-2 mt-2"><button className="px-3 py-2 rounded-2xl border" onClick={clear}>지우기</button></div></div><div className="rounded-2xl bg-white border p-4 shadow space-y-2"><div className="text-sm text-gray-500">쓰기 힌트</div><div className="text-sm text-gray-700">격자(가로/세로 중앙선)를 상상하고 큰 획부터 쓰세요. 실제 획순은 문자마다 다르며, 본 앱은 트레이싱 연습용입니다.</div><div className="text-sm text-gray-500">단어</div><div className="text-lg font-semibold">{target.ja} ({target.reading})</div><div className="text-sm text-gray-500">한국어</div><div>{target.ko}</div></div></div></div>); }

        function ProgressView(){ const learned=WORDS.filter(w=> state.learnedIds.includes(w.id)); const accuracy=(state.stats.correct+state.stats.wrong)? Math.round((state.stats.correct/(state.stats.correct+state.stats.wrong))*100):0; const last14=Array.from({length:14}).map((_,i)=>{ const d=new Date(); d.setDate(d.getDate()-(13-i)); return d.toISOString().slice(0,10);}); const weeklyGoal=50; const weeklyPct=Math.min(100, Math.round((state.week?.answers||0)/weeklyGoal*100)); return (<div className="space-y-4"><div className="grid md:grid-cols-4 gap-3"><div className="rounded-2xl bg-white border p-3 shadow text-center"><div className="text-sm text-gray-500">연속 출석</div><div className="text-2xl font-bold">{`${state.streak}일`}</div></div><div className="rounded-2xl bg-white border p-3 shadow text-center"><div className="text-sm text-gray-500">학습 단어</div><div className="text-2xl font-bold">{`${learned.length}/${WORDS.length}`}</div></div><div className="rounded-2xl bg-white border p-3 shadow text-center"><div className="text-sm text-gray-500">정답률</div><div className="text-2xl font-bold">{`${accuracy}%`}</div></div><div className="rounded-2xl bg-white border p-3 shadow text-center"><div className="text-sm text-gray-500">주간 퀴즈</div><div className="text-2xl font-bold">{`${state.week?.answers||0}/${weeklyGoal}`}</div></div></div><div className="rounded-2xl bg-white border p-4 shadow"><div className="text-sm text-gray-500 mb-1">주간 챌린지 진행도</div><div className="w-full h-3 bg-gray-200 rounded-full overflow-hidden"><div className="h-3 bg-black" style={{width: `${weeklyPct}%`}}></div></div><div className="text-xs text-gray-500 mt-1">이번 주 {state.week?.answers||0} / {weeklyGoal}</div></div><div><div className="text-sm text-gray-500 mb-2">최근 14일 출석</div><div className="grid grid-cols-14 gap-1">{last14.map(d=>(<div key={d} className={`h-6 rounded ${state.lastOpenDate && d <= state.lastOpenDate ? "bg-black" : "bg-gray-200"}`}></div>))}</div></div><div className="rounded-2xl bg-white border p-4 shadow"><div className="text-lg font-semibold mb-2">학습 단어 목록</div><div className="grid md:grid-cols-3 gap-2 max-h-64 overflow-auto pr-1">{learned.map(w=>(<div key={w.id} className="border rounded-xl p-2 text-sm"><div className="font-semibold">{w.ja} <span className="text-gray-500 text-xs">({w.reading})</span></div><div className="text-gray-600">{w.ko} · {w.romaji}</div></div>))}</div></div><button className="px-4 py-2 rounded-2xl bg-white border" onClick={()=>{ localStorage.removeItem(STORAGE_KEY); setState({ lastOpenDate:null, streak:0, learnedIds:[], dueMap:{}, stats:{correct:0,wrong:0,gamesWon:0}, week:{start:null,answers:0}, badges:[] }); }}>초기화(데이터 리셋)</button></div>); }

        return (<div className="min-h-screen text-gray-900 p-4 md:p-8"><div className="max-w-5xl mx-auto"><header className="mb-6 flex items-center justify-between gap-3 flex-wrap"><div><h1 className="text-2xl md:text-3xl font-extrabold">日本語 학습 · 생쥐 & 치즈</h1><p className="text-gray-600">한국어로 배우는 일본어 · 출석 · 퀴즈 · 게임 · 쓰기 연습 · 배지</p></div><div className="flex gap-2"><div className="rounded-2xl bg-white border p-3 shadow text-center"><div className="text-sm text-gray-500">연속</div><div className="text-2xl font-bold">{`${state.streak}일`}</div></div><div className="rounded-2xl bg-white border p-3 shadow text-center"><div className="text-sm text-gray-500">정답</div><div className="text-2xl font-bold">{state.stats.correct}</div></div></div></header><div className="flex gap-2 mb-4 flex-wrap">{["학습","퀴즈","게임","쓰기","진행도"].map(t=>(<button key={t} onClick={()=>setTab(t)} className={`px-4 py-2 rounded-2xl shadow ${tab===t?"bg-black text-white":"bg-white border"}`}>{t}</button>))}</div><main className="mt-2">{tab==="학습" && <Learn/>}{tab==="퀴즈" && <Quiz/>}{tab==="게임" && <Game/>}{tab==="쓰기" && <Writing/>}{tab==="진행도" && <ProgressView/>}</main><footer className="mt-10 text-center text-xs text-gray-500">© {new Date().getFullYear()} JP Study – GitHub Pages 배포용</footer></div></div>);
      }

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(<App/>);
    </script>
  </body>
</html>
